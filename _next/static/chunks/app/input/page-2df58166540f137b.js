(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[17],{570:(e,t,r)=>{var s=r(4376),o=Object.prototype,a=o.hasOwnProperty,n=o.toString,l=s?s.toStringTag:void 0;e.exports=function(e){var t=a.call(e,l),r=e[l];try{e[l]=void 0;var s=!0}catch(e){}var o=n.call(e);return s&&(t?e[l]=r:delete e[l]),o}},771:(e,t,r)=>{var s=r(8233),o=r(8611);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==s(e)}},2446:(e,t,r)=>{Promise.resolve().then(r.bind(r,2802))},2500:(e,t,r)=>{var s=r(7985),o="object"==typeof self&&self&&self.Object===Object&&self;e.exports=s||o||Function("return this")()},2712:(e,t,r)=>{"use strict";r.d(t,{n:()=>s});let s=["Рава-Руське","Потелицьке","Річківське","Михайлівське","Волицьке","Хлівчанське","Немирівське","Завадівське","Яворівське","Рогізнянське","Шклівське","Свидницьке"]},2802:(e,t,r)=>{"use strict";r.d(t,{default:()=>h});var s=r(5155),o=r(2115),a=r(5964),n=r.n(a),l=r(4524);function u(e){let{tableId:t,date:r,setDate:o,saveData:a,rows:n}=e;return(0,s.jsxs)("div",{className:"mb-4 sm:mb-2",children:[(0,s.jsxs)("h2",{className:"text-xl sm:text-lg md:text-2xl font-bold mb-2 sm:mb-1",children:["Орієнтовний план реалізації (Таблиця ",t+1,")"]}),(0,s.jsx)("input",{type:"date",value:r,onChange:e=>{o(t,e.target.value),a({tableId:t,date:e.target.value,rows:n})},className:"border px-2 py-1 sm:px-1 sm:py-0.5 rounded text-sm sm:text-xs md:text-base"})]})}var c=r(2712);let i=[{buyer:"Населення",product:"Деревина дров’яна НП",species:"1 група",volume:10,amount:1e4},{buyer:'ПП "ЕНЕРГІЯ ЗАХІД"',product:"Деревина дров’яна НП",species:"Мл",volume:20,amount:3e4},{buyer:'ПП "МЕЙВУД"',product:"Круглі лісоматеріали",species:"Сосна",volume:25,amount:1e5},{buyer:'ПП "ТАЙФУН-ПЛЮС"',product:"Круглі лісоматеріали",species:"Дуб",volume:20,amount:3e5},{buyer:'СП ТЗОВ "ЛІСОВА КОМПАНІЯ "ЛАВАНДА"',product:"Круглі лісоматеріали",species:"Сосна",volume:30,amount:9e4},{buyer:'ТЗОВ "ГАЛИЦЬКА ГУРТІВНЯ"',product:"Круглі лісоматеріали",species:"Сосна",volume:20,amount:7e4},{buyer:'ТЗОВ "ЄВРОШПОН"',product:"Круглі лісоматеріали",species:"Дуб",volume:10,amount:2e5},{buyer:'ТЗОВ "ЛЬВІВСЬКІ ТЕПЛОВІ МЕРЕЖІ"',product:"Деревина дров’яна ПВ",species:"Тл",volume:25,amount:41250},{buyer:'ТЗОВ "ПРОМЕКО"',product:"Круглі лісоматеріали",species:"Сосна",volume:30,amount:1e5},{buyer:'ТЗОВ "ТЕТА ТЕПЛО"',product:"Деревина дров’яна ПВ",species:"Тл",volume:10,amount:13500},{buyer:'ТЗОВ НВП "СІРІОН"',product:"Круглі лісоматеріали",species:"Дуб",volume:20,amount:3e5},{buyer:'ТОВ "АГРОДЕРЕВ"',product:"Круглі лісоматеріали",species:"Бук",volume:20,amount:8e4},{buyer:'ТОВ "БОЙКИ ПАЛЛЕТС"',product:"Круглі лісоматеріали",species:"Сосна",volume:30,amount:12e4},{buyer:'ТОВ "ВЕСТВУД ЕНЕРДЖІ"',product:"Деревина дров’яна ПВ",species:"Сосна",volume:25,amount:5e4},{buyer:'ТОВ "КРОНОСПАН УА"',product:"Деревина дров’яна ПВ",species:"Сосна",volume:30,amount:45e3},{buyer:'ТОВ "ЛЬВІВ-ПАК"',product:"Круглі лісоматеріали",species:"Сосна",volume:25,amount:87500},{buyer:'ТОВ "НВП "ГРИФСКАНД-СВАЛЯВА"',product:"Деревина дров’яна ПВ",species:"Граб",volume:25,amount:42500},{buyer:'ТОВ "СИВЛІС"',product:"Круглі лісоматеріали",species:"Сосна",volume:30,amount:15e4},{buyer:'ТОВ "ТРАНСТРЕЙДВУД"',product:"Деревина дров’яна ПВ",species:"Сосна",volume:30,amount:45e3},{buyer:'ТОВ "УЛДК"',product:"Круглі лісоматеріали",species:"Дуб",volume:10,amount:2e5},{buyer:"ФОП Білецький С.Я.",product:"Деревина дров’яна ПВ",species:"Тл",volume:10,amount:2e4},{buyer:"ФОП ГАРГАУН ЯНА ВІКТОРІВНА",product:"Деревина дров’яна ПВ",species:"Тл",volume:40,amount:6e4}],d=["Деревина дров’яна НП","Деревина дров’яна ПВ","Круглі лісоматеріали"],p=["1 група","2 група","3 група","Тл","Мл","Хв","Дуб","Бук","Граб","Береза","Вільха","Сосна"],m=(0,o.memo)(e=>{let{row:t,idx:r,handleFieldChange:o,handleBuyerChange:a,deleteRow:n}=e;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"border px-2 py-1",children:t.id}),(0,s.jsx)("td",{className:"border px-2 py-1",children:(0,s.jsxs)("select",{className:"w-full border rounded",value:t.forest,onChange:e=>o(r,"forest",e.target.value),children:[(0,s.jsx)("option",{value:"",children:"--"}),c.n.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})}),(0,s.jsx)("td",{className:"border px-2 py-1",children:(0,s.jsxs)("select",{className:"w-full border rounded",value:t.buyer,onChange:e=>a(r,e.target.value),children:[(0,s.jsx)("option",{value:"",children:"--"}),i.map(e=>(0,s.jsx)("option",{value:e.buyer,children:e.buyer},e.buyer))]})}),(0,s.jsx)("td",{className:"border px-2 py-1",children:(0,s.jsxs)("select",{className:"w-full border rounded",value:t.product,onChange:e=>o(r,"product",e.target.value),children:[(0,s.jsx)("option",{value:"",children:"--"}),d.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})}),(0,s.jsx)("td",{className:"border px-2 py-1",children:(0,s.jsxs)("select",{className:"w-full border rounded",value:t.species,onChange:e=>o(r,"species",e.target.value),children:[(0,s.jsx)("option",{value:"",children:"--"}),p.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})}),(0,s.jsx)("td",{className:"border px-2 py-1",children:(0,s.jsx)("input",{type:"number",value:t.volume,onChange:e=>o(r,"volume",e.target.value),className:"w-full border rounded px-2 py-1",min:"0",step:"0.01"})}),(0,s.jsx)("td",{className:"border px-2 py-1",children:(0,s.jsx)("input",{type:"number",value:t.amount,onChange:e=>o(r,"amount",e.target.value),className:"w-full border rounded px-2 py-1",min:"0",step:"0.01"})}),(0,s.jsx)("td",{className:"border px-2 py-1 text-center",children:(0,s.jsx)("button",{className:"text-red-600 hover:text-red-800",onClick:()=>n(t.id),title:"Видалити рядок",children:"\uD83D\uDDD1️"})})]},"".concat(t.id,"-").concat(r))});function x(e){let{tableId:t,rows:r,handleFieldChange:o,handleBuyerChange:a,deleteRow:n}=e;return(0,s.jsx)("div",{className:"overflow-x-auto mb-4 sm:mb-2",children:(0,s.jsxs)("table",{className:"min-w-full border text-[12px] sm:text-base text-left",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"border px-2 py-1 sm:px-1 sm:py-0.5 min-w-[40px] whitespace-normal",children:"№"}),(0,s.jsx)("th",{className:"border px-2 py-1 sm:px-1 sm:py-0.5 min-w-[100px] whitespace-normal",children:"Лісництво"}),(0,s.jsx)("th",{className:"border px-2 py-1 sm:px-1 sm:py-0.5 min-w-[100px] whitespace-normal",children:"Покупець"}),(0,s.jsx)("th",{className:"border px-2 py-1 sm:px-1 sm:py-0.5 min-w-[120px] whitespace-normal",children:"Найменування продукції"}),(0,s.jsx)("th",{className:"border px-2 py-1 sm:px-1 sm:py-0.5 min-w-[80px] whitespace-normal",children:"Порода"}),(0,s.jsx)("th",{className:"border px-2 py-1 sm:px-1 sm:py-0.5 min-w-[100px] whitespace-normal",children:"Орієнтовний об’єм (м\xb3)"}),(0,s.jsx)("th",{className:"border px-2 py-1 sm:px-1 sm:py-0.5 min-w-[120px] whitespace-normal",children:"Орієнтовна сума без ПДВ (грн)"}),(0,s.jsx)("th",{className:"border px-2 py-1 sm:px-1 sm:py-0.5 min-w-[40px]"})]})}),(0,s.jsx)("tbody",{children:r.map((e,r)=>(0,s.jsx)(m,{row:e,idx:r,handleFieldChange:(e,r,s)=>o(t,e,r,s),handleBuyerChange:(e,r)=>a(t,e,r),deleteRow:()=>n(t,e.id)},"".concat(e.id,"-").concat(r)))})]})})}function b(e){let{tableId:t,addRow:r}=e;return(0,s.jsx)("button",{onClick:()=>r(t),className:"mb-4 sm:mb-2 bg-blue-500 text-white px-4 py-2 sm:px-3 sm:py-1 rounded hover:bg-blue-600 sm:text-sm md:text-base",children:"Додати рядок"})}function v(e){let{tables:t,setTables:r,counter:o,setCounter:a,debouncedSave:n}=e,l=e=>{let s=t.findIndex(r=>r.date===t[e].date),l=[...t];l[s].rows=[...l[s].rows,{id:o,forest:"",buyer:"",product:"",species:"",volume:0,amount:0}],r(l),n({tables:l}),a(e=>e+1)},c=(e,s)=>{let o=t.findIndex(r=>r.date===t[e].date),a=[...t];a[o].rows=a[o].rows.filter(e=>e.id!==s),r(a),n({tables:a})},d=(e,s,o)=>{let a=t.findIndex(r=>r.date===t[e].date),l=i.find(e=>e.buyer===o),u=[...t];l?u[a].rows[s]={...u[a].rows[s],buyer:o,product:l.product,species:l.species,volume:l.volume,amount:l.amount}:u[a].rows[s]={...u[a].rows[s],buyer:o,product:"",species:"",volume:0,amount:0},r(u),n({tables:u})},p=(e,s,o,a)=>{let l=t.findIndex(r=>r.date===t[e].date),u=[...t];if("volume"===o||"amount"===o){let e=Number(a);if(isNaN(e)||e<0)return;u[l].rows[s]={...u[l].rows[s],[o]:e}}else u[l].rows[s]={...u[l].rows[s],[o]:a};r(u),n({tables:u})},m=(e,s)=>{let o=t.findIndex(r=>r.date===t[e].date),a=[...t];a[o].date=s,r(a),n({tables:a})},v=e=>{let{tableId:s,date:o,rows:a}=e,l=t.findIndex(e=>e.date===t[s].date),u=[...t];u[l]={date:o,rows:a},r(u),n({tables:u})},h=e=>{if(confirm("Ви впевнені, що хочете видалити цю таблицю?")){let s=t.filter((t,r)=>r!==e);r(s),n({tables:s})}};return(0,s.jsx)(s.Fragment,{children:t.map((e,t)=>(0,s.jsxs)("div",{className:"mb-6 border rounded p-4 sm:p-2",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4 space-y-2 sm:space-y-0",children:[(0,s.jsx)(u,{tableId:t,date:e.date,setDate:m,saveData:v,rows:e.rows}),(0,s.jsx)("button",{onClick:()=>h(t),className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 sm:px-3 sm:py-1 sm:text-sm md:text-base",children:"Видалити таблицю"})]}),(0,s.jsx)(x,{tableId:t,rows:e.rows,handleFieldChange:p,handleBuyerChange:d,deleteRow:c}),(0,s.jsx)(b,{tableId:t,addRow:l})]},t))})}function h(){let[e,t]=(0,o.useState)([]),[r,a]=(0,o.useState)(1);(0,o.useEffect)(()=>{try{let e=(0,l.D)();if(e.tables.length>0){t(e.tables);let r=e.tables.flatMap(e=>e.rows).reduce((e,t)=>Math.max(e,t.id),0);a(r+1||1)}else t([]),a(1)}catch(e){console.error("Помилка завантаження даних:",e),alert("Не вдалося завантажити дані.")}},[]);let u=(0,o.useMemo)(()=>n()(e=>{(0,l.x)(e)},500),[]),c=(0,o.useCallback)(()=>{let e={date:"",rows:[]};t(t=>[...t,e])},[]);return(0,s.jsxs)("div",{className:"w-full overflow-x-auto p-4 sm:p-2",children:[(0,s.jsx)(v,{tables:e,setTables:t,counter:r,setCounter:a,debouncedSave:u}),(0,s.jsx)("button",{onClick:c,className:"mt-4 sm:mt-2 bg-green-500 text-white px-4 py-2 sm:px-3 sm:py-1 rounded hover:bg-green-600 sm:text-sm md:text-base",children:"Додати таблицю"})]})}m.displayName="EditableRow"},4217:(e,t,r)=>{var s=r(6713),o=/^\s+/;e.exports=function(e){return e?e.slice(0,s(e)+1).replace(o,""):e}},4376:(e,t,r)=>{e.exports=r(2500).Symbol},4439:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},4524:(e,t,r)=>{"use strict";r.d(t,{D:()=>o,x:()=>s});let s=e=>{localStorage.setItem("tables",JSON.stringify(e.tables))},o=()=>{let e=localStorage.getItem("tables"),t=e?JSON.parse(e):[];if(Array.isArray(t)){let e=t.length>0?t[0]:{date:"",rows:[]};return{tables:t,date:e.date||"",rows:e.rows||[]}}return{tables:t.tables||[],date:t.date||"",rows:t.rows||[]}}},5964:(e,t,r)=>{var s=r(7460),o=r(6685),a=r(6815),n=Math.max,l=Math.min;e.exports=function(e,t,r){var u,c,i,d,p,m,x=0,b=!1,v=!1,h=!0;if("function"!=typeof e)throw TypeError("Expected a function");function f(t){var r=u,s=c;return u=c=void 0,x=t,d=e.apply(s,r)}function y(e){var r=e-m,s=e-x;return void 0===m||r>=t||r<0||v&&s>=i}function j(){var e,r,s,a=o();if(y(a))return w(a);p=setTimeout(j,(e=a-m,r=a-x,s=t-e,v?l(s,i-r):s))}function w(e){return(p=void 0,h&&u)?f(e):(u=c=void 0,d)}function g(){var e,r=o(),s=y(r);if(u=arguments,c=this,m=r,s){if(void 0===p)return x=e=m,p=setTimeout(j,t),b?f(e):d;if(v)return clearTimeout(p),p=setTimeout(j,t),f(m)}return void 0===p&&(p=setTimeout(j,t)),d}return t=a(t)||0,s(r)&&(b=!!r.leading,i=(v="maxWait"in r)?n(a(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h),g.cancel=function(){void 0!==p&&clearTimeout(p),x=0,u=m=c=p=void 0},g.flush=function(){return void 0===p?d:w(o())},g}},6685:(e,t,r)=>{var s=r(2500);e.exports=function(){return s.Date.now()}},6713:e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},6815:(e,t,r)=>{var s=r(4217),o=r(7460),a=r(771),n=0/0,l=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,i=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return n;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=s(e);var r=u.test(e);return r||c.test(e)?i(e.slice(2),r?2:8):l.test(e)?n:+e}},7460:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7985:(e,t,r)=>{e.exports="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g},8233:(e,t,r)=>{var s=r(4376),o=r(570),a=r(4439),n=s?s.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":n&&n in Object(e)?o(e):a(e)}},8611:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(2446)),_N_E=e.O()}]);